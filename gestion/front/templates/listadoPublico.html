{% extends "base.html" %}
{% load static %}
{% block content %}

<!-- Calendario (Placeholder) -->
<img src="https://images.placeholders.dev/?width=800&height=600&text=Placeholder&bgColor=%23f7f6f6&textColor=%236d6e71" alt="Placeholder Calendario">

<!-- Filtros -->
<form method="get" name="filtros" class="mb-3">
    <div class="row">
        <div class="col-6"> <!-- Filtro de segmento del evento -->
            <select name="segmento" class="form-select w-50" onchange="document.filtros.submit()">
                <option value="" {% if request.GET.segmento == "" %}selected{% endif %}>Segmento</option>
                {% for segmento in segmentos %}
                <option value="{{ segmento.id }}" {% if segmento.id == segmento_actual %}selected{% endif %}>{{ segmento.nombre }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="col-6"> <!-- Filtro de tipo de evento -->
            <select name="tipo" class="form-select w-50" onchange="this.form.submit()">
                <option value="" {% if request.GET.tipo == "" %}selected{% endif %}>Tipo</option>
                {% for tipo in tipos %}
                <option value="{{ tipo.0 }}" {% if tipo.0 == tipo_actual %}selected{% endif %}>{{ tipo.1 }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
</form>

<!-- Tabla de actividades -->
<div class="row">
    <div class="col-12" id="tableHead">
        <h2>Actividades</h2>
    </div>
    <table class="table table-bordered">
        <thead>
            <th scope="col-4">Hito</th>
            <th scope="col-2">Fecha Inicio</th>
            <th scope="col-2">Fecha TÃ©rmino</th>
            <th scope="col-2">Tipo</th>
            <th scope="col-2">Segmento</th>
        </thead>
        <tbody>
            {% for evento in eventos %}
            <tr>
                <td>{{ evento.titulo }}</td>
                <td>{{ evento.fecha_inicio }}</td>
                <td>{{ evento.fecha_termino }}</td>
                <td>{{ evento.tipo }}</td>
                <td>
                    {% for segmento in evento.segmento %}
                    {{ segmento.nombre }}, 
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>    
    
</div>

{% endblock %}